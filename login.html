<!DOCTYPE html>
<html lang="en" dir="ltr">


<!-- Added by  --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by  -->
<head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="css/master.css">
        <link rel="stylesheet" href="css/appeal.css">
        <title>Appeal | Mykals</title>
        <link rel="icon" type="image/png" href="favicon.png"/>
        <script src="../code.jquery.com/jquery-3.5.1.min.js"></script>
        <script src="js/darkmode.js"></script>
        <style>
            .darkmodeSwitch {
                top: 10px;
            }

            .switch {
                position: relative;
                display: inline-block;
                width: 60px;
                height: 25px;
            }

            .switch-div{
                position: absolute;
                right: 40px;
            }

            /* Hide default HTML checkbox */
            .switch input {
                opacity: 0;
                width: 0;
                height: 0;
            }

            /* The slider */
            .slider {
                position: absolute;
                cursor: pointer;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: #ccc;
                -webkit-transition: 0.4s;
                transition: 0.4s;
            }

            .slider:before {
                position: absolute;
                content: "";
                height: 37px;
                width: 37px;
                left: 0px;
                bottom: 4px;
                top: 0;
                bottom: 0;
                margin: auto 0;
                -webkit-transition: 0.4s;
                transition: 0.4s;
                box-shadow: 0 0px 15px #2020203d;
                background: var(--switch) url('../i.ibb.co/7JfqXxB/sunny.png');
                background-repeat: no-repeat;
                background-position: center;
            }

            input:checked + .slider {
                background-color: var(--link-color);
            }

            input:focus + .slider {
                box-shadow: 0 0 1px var(--link-color);
            }

            input:checked + .slider:before {
                -webkit-transform: translateX(24px);
                -ms-transform: translateX(24px);
                transform: translateX(24px);
                background: var(--switch) url('../i.ibb.co/FxzBYR9/night.png');
                background-repeat: no-repeat;
                background-position: center;
            }

            /* Rounded sliders */
            .slider.round {
                border-radius: 34px;
            }

            .slider.round:before {
                border-radius: 50%;
            }
        </style>
    </head>
    <body class="wrapper darkmodeSection">
	<!--
        <div class="darkmodeSwitch switch-div" style="z-index: 1;">
            <label class="switch">
                <input type="checkbox" onchange="toggleTheme()" id="slider">
                <span class="slider round"></span>
            </label>
        </div>
	-->


        <div id="header">
            <div class="outer">
                <div class="middle">
                    <div class="arrows-div">
                        <div class="arrows flex column">
                            <a class="flex row" href="#" onclick="goUp('username');return false;"><img class="arrow" src="assets/img/random/arrow-up.png" alt="Go up a section"></a>
                            <a id="usernamedown" class="flex row hide" href="#" onclick="goDown('username');return false;"><img class="arrow" src="assets/img/random/arrow-down.png" alt="Go down a section"></a>
                        </div>
                    </div>
                    <div class="inner">
                        <p class="para">Register</p>
                        <p class="sub-line">What is you minecraft user name?</p>
                        <p id="invalidusername" class="error"></p>
                        <div class="group">
                          <form name="username" onsubmit="return verifyUsername()">
                              <input type="text" name="username" id="theValue" maxlength="37" required /><br>
                              <span class="highlight"></span>
                              <span class="bar"></span>
                              <label>Username</label id="theValue">
                              <input class="button-outer" type="button" id="setValue" value="Register"/>
                              <script>
                              (function() {
                                // Use an input to show the current value and let
                                // the user set a new one
                                var input = document.getElementById("theValue");

                                // Reading the value, which was store as "theValue"
                                if (localStorage && 'theValue' in localStorage) {
                                  input.value = localStorage.theValue;

                                }

                                document.getElementById("setValue").onclick = function () {
                                  // Writing the value
                                  localStorage && (localStorage.theValue = input.value);
                                  alert("success you are now logged in!")
                                  window.location.href = "https://Mykalsmc.infiniteimagegallery.repl.co?fruit="+input.value;
                                };
                              })();
                              </script>
                          </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="email" class="hide">
            <div class="outer">
                <div class="middle">
                    <div class="arrows-div">
                        <div class="arrows flex column">
                            <a class="flex row" href="#" onclick="goUp('email');return false;"><img class="arrow" src="assets/img/random/arrow-up.png" alt="Go up a section"></a>
                            <a id="emaildown" class="flex row hide" href="#" onclick="goDown('email');return false;"><img class="arrow" src="assets/img/random/arrow-down.png" alt="Go down a section"></a>
                        </div>
                    </div>
                    <div class="inner">
                        <p class="para">Please enter your email.</p>
                        <p class="sub-line">It does not have to be your minecraft email.</p>
                        <p id="emailError" class="error"></p>
                        <div class="group">
                            <form name="emailForm" onsubmit="return verifyMail()">
                                <input type="email" name="email" id="emailinput" required/>
                                <span class="highlight"></span>
                                <span class="bar"></span>
                                <label>Email</label>
                                <input class="button-outer" type="submit" name="emailButton" value="Continue"/>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="punishment" class="hide">
            <div class="outer">
                <div class="middle">
                    <div class="arrows-div">
                        <div class="arrows flex column">
                            <a class="flex row" href="#" onclick="goUp('punishment');return false;"><img class="arrow" src="assets/img/random/arrow-up.png" alt="Go up a section"></a>
                            <a id="punishmentdown" class="flex row hide" href="#" onclick="goDown('punishment');return false;"><img class="arrow" src="assets/img/random/arrow-down.png" alt="Go down a section"></a>
                        </div>
                    </div>
                    <div class="inner">
                        <div id="minecraftpunishmentdiv" class="">
                            <p class="para">What punishment would you like to appeal?</p>
                            <p class="sub-line">Please select it below.</p>
                            <p id="wrongminecraftpunishment" class="error" style="margin-bottom: 10px;"></p>
                            <form name="punishmentForm" onsubmit="return verifyPunishment()">
                                <select id="dropdownpunishment" class="select" name="dropdownpunishment" required>
                                    <option value="0">Enter your username first</option>
                                </select>
                                <input class="button-outer" style="margin-top: 15px;" type="submit" name="punishmentButton" value="Continue"/>
                            </form>
                        </div>
                        <div id="discordpunishmentdiv" class="hide">
                            <p class="para">What punishment would you like to appeal?</p>
                            <p class="sub-line">Please enter a short description of the punishment, you can write the appeal later in this form.</p>
                            <p id="wrongdiscordpunishment" class="error"></p>
                            <div class="group">
                                <form name="punishmentForm" onsubmit="return verifyPunishment()">
                                    <input type="text" name="reason" id="discordpunishment" maxlength="256">
                                    <span class="highlight"></span>
                                    <span class="bar"></span>
                                    <label>Punishment Reason</label>
                                    <input class="button-outer" style="margin-top: 15px;" type="submit" name="punishmentButton" value="Continue"/>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="appeal" class="hide">
            <div class="outer">
                <div class="middle">
                    <div class="arrows-div">
                        <div class="arrows flex column">
                            <a class="flex row" href="#" onclick="goUp('appeal');return false;"><img class="arrow" src="assets/img/random/arrow-up.png" alt="Go up a section"></a></a>
                        </div>
                    </div>
                    <div class="inner">
                        <p class="para">Why should your punishment be reduced or removed?</p>
                        <p class="sub-line">Please take your time writing this, we're more likely to accept an appeal if effort was put into it.</p>
                        <form name="appealForm" onsubmit="return verifyEverything()">
                            <p id="appealError" class="error"></p>
                            <textarea id="appealinput" name="reason" maxlength="10000" required></textarea>
                            <p id=ratelimit class="error"></p>
                            <input id="finalsubmit" class="button-outer" style="margin-top: 15px;" type="submit" name="submitform" value="Submit"/>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div id="done" class="outer hide">
            <div class="middle">
                <div class="inner">
                  <p class="para end">Thanks for submitting your appeal!</p>
                  <p class="sub-line end">You can now safely close this page.</p>
                </div>
            </div>
        </div>
        <script>
            let uuid = "empty";
            let appealtype = 'minecraft';

            function goUp(from){
                switch (from){
                    case 'username': //To notice
                        document.getElementById("username").classList.add("hide");
                        document.getElementById("notice").classList.remove("hide");
                        return false;
                    case 'email': //To username
                        document.getElementById("email").classList.add("hide");
                        document.getElementById("username").classList.remove("hide");
                        return false;
                    case 'punishment': //To email
                        document.getElementById("punishment").classList.add("hide");
                        document.getElementById("email").classList.remove("hide");
                        return false;
                    case 'appeal': //To punishment
                        document.getElementById("appeal").classList.add("hide");
                        document.getElementById("punishment").classList.remove("hide");
                        return false;
                    default:
                        console.log("Did you touch things you're not supposed to touch?");
                        return false;
                }
            }

            function goDown(from){
                switch (from){
                    case 'username': //To email
                        document.getElementById("username").classList.add("hide");
                        document.getElementById("email").classList.remove("hide");
                        return false;
                    case 'email': //To punishment
                        document.getElementById("email").classList.add("hide");
                        document.getElementById("punishment").classList.remove("hide");
                        return false;
                    case 'punishment': //To appeal
                        document.getElementById("punishment").classList.add("hide");
                        document.getElementById("appeal").classList.remove("hide");
                        return false;
                    default:
                        console.log("Did you touch things you're not supposed to touch?");
                        return false;
                }
            }

            function startAppeal(){
                document.getElementById("header").classList.add("hide");
                document.getElementById("notice").classList.remove("hide");
                return false
            }

            function noticeAccept(){
                document.getElementById("notice").classList.add("hide");
                document.getElementById("username").classList.remove("hide");
                return false;
            }

            function verifyUsername() {
                document.getElementById("invalidusername").innerHTML = "";
                var $usernamefield = document.getElementById("usernameinput");
                var $username = $usernamefield.value;

                $.ajax({
                    url: 'https://alttd.com/api_appeals',
                    type: 'post',
                    data: {action:'verify_user',username:$username},
                    success: function(response){
                    document.getElementById("invalidusername").innerHTML = "";
                        if (response == "0"){
                            document.getElementById("invalidusername").innerHTML = "Invalid username!";
                        } else if (response == "1"){
                            uuid = $username;
                            appealtype = 'discord';
                            document.getElementById("minecraftpunishmentdiv").classList.add("hide");
                            document.getElementById("discordpunishmentdiv").classList.remove("hide");
                            document.getElementById("username").classList.add("hide");
                            document.getElementById("email").classList.remove("hide");
                            document.getElementById("usernamedown").classList.remove("hide");
                            document.getElementById("dropdownpunishment").required = false;
                            document.getElementById("discordpunishment").required = true;
                        } else if (response == "2"){
                            document.getElementById("invalidusername").innerHTML = "We couldn't find any punishments, if you can't join the Minecraft server please contact us through Discord or our contact form! If you're trying to appeal a Discord punishment please include the # and numbers the end of your name.";
                        } else if (response == "3"){
                            document.getElementById("invalidusername").innerHTML = "You are blocked from using this form due to spam/misuse";
                        } else if (response.length == 10){
                            Number.prototype.padLeft = function(base,chr){
                                var  len = (String(base || 10).length - String(this).length)+1;
                                return len > 0? new Array(len).join(chr || '0')+this : this;
                            }
                            var d = new Date(response*1000);
                            var dString = d.getFullYear() + " " + d.toString().split(' ')[1] + " " + d.getDate() + " "
                                + [d.getHours().padLeft(), d.getMinutes().padLeft()].join(':');
                            document.getElementById("invalidusername").innerHTML = "You are blocked from using the appeal form until " + dString + ".";
                        } else if (response.length > 1){
                            add_options(response);
                            uuid = response;
                            document.getElementById("username").classList.add("hide");
                            document.getElementById("email").classList.remove("hide");
                            document.getElementById("usernamedown").classList.remove("hide");
                        }
                    }
                });
                return false;
          }

            function add_options(response){
                $.ajax({
                    url: 'https://alttd.com/api_appeals',
                    type: 'post',
                    data: {action:'punishments',uuid:response},
                    success: function(response){
                        document.getElementById("wrongminecraftpunishment").value = "";
                        if (response != "<option value=\"default\">nothing selected</option>"){
                            document.getElementById("dropdownpunishment").innerHTML = response;
                        } else {
                            document.getElementById("wrongminecraftpunishment").value = "No punishments found. Please check your username, if it's correct you should be able to join the server, if not feel free to contact staff!";
                            console.log("No punishments found!");
                        }
                    }
                });
          }

          function verifyMail(){
              var email = document.getElementById("emailinput").value
              $.ajax({
                  url: 'https://alttd.com/api_appeals',
                  type: 'post',
                  data: {action:'verify_mail',email:email},
                  success: function(response){
                      if (response == "1"){
                          document.getElementById("email").classList.add("hide");
                          document.getElementById("punishment").classList.remove("hide");
                          document.getElementById("emaildown").classList.remove("hide");
                          document.getElementById("emailError").innerHTML = "";
                      } else if (response == "0"){
                          document.getElementById("emailError").innerHTML = "Invalid email!";
                      }
                  }
              });
              return false;
          }

          function verifyPunishment(){

              document.getElementById("wrongminecraftpunishment").innerHTML = "";
              document.getElementById("wrongdiscordpunishment").innerHTML = "";

              if (appealtype == 'minecraft'){

                  if (document.getElementById("dropdownpunishment").value == 0){
                      document.getElementById("wrongminecraftpunishment").innerHTML = "Please select a punishment!";
                  } else {
                      document.getElementById("punishment").classList.add("hide");
                      document.getElementById("appeal").classList.remove("hide");
                      document.getElementById("punishmentdown").classList.remove("hide");
                  }
              } else if (appealtype == 'discord'){

                  var punishment = document.getElementById("discordpunishment").value;

                  $.ajax({
                      url: 'https://alttd.com/api_appeals',
                      type: 'post',
                      data: {action:'verify_discord_punishment',punishment:punishment},
                      success: function(response){
                          if (response == "1"){
                              document.getElementById("punishment").classList.add("hide");
                              document.getElementById("appeal").classList.remove("hide");
                              document.getElementById("punishmentdown").classList.remove("hide");
                          } else if (response == "0"){
                              document.getElementById("wrongdiscordpunishment").innerHTML = "The punishment reason has to be between 1 and 256 characters!";
                          }
                      }
                  });
              }
              return false;
          }

          function verifyEverything(){
              document.getElementById("finalsubmit").disabled = true
              setTimeout(function(){ document.getElementById("finalsubmit").disabled = false }, 5000);
              document.getElementById("finalsubmit").value = "Submitting...";
              setTimeout(function(){ document.getElementById("finalsubmit").value = "Submit"}, 5000)

              document.getElementById("wrongminecraftpunishment").innerHTML = "";
              document.getElementById("wrongdiscordpunishment").innerHTML = "";
              document.getElementById("invalidusername").innerHTML = "";
              document.getElementById("emailinput").innerHTML = "";
              document.getElementById("appealError").innerHTML = "";

              if (appealtype == 'minecraft'){
                  verifyMinecraft();
              } else if (appealtype == 'discord'){
                  verifyDiscord();
              } else {
                  alert("The appeal type could not be found, try reloading the web page and restarting the appeal. If this issue persists please contact an Admin.");
              }

              return false;
          }

          function verifyMinecraft(){

              if (document.getElementById("dropdownpunishment").value == "0"){
                  document.getElementById("appeal").classList.add("hide");
                  document.getElementById("punishment").classList.remove("hide");
                  document.getElementById("wrongminecraftpunishment").innerHTML = "Invalid punishment selected!";
                  return false;
              }

              if (uuid == 'empty'){
                  document.getElementById("invalidusername").innerHTML = "Please submit a username first!"
                  document.getElementById("appeal").classList.add("hide");
                  document.getElementById("username").classList.remove("hide");
                  return false;
              }

              var value = document.getElementById("dropdownpunishment").value;
              var appeal = document.getElementById("appealinput").value;
              var email = document.getElementById("emailinput").value;

              $.ajax({
                  url: 'https://alttd.com/api_appeals',
                  type: 'post',
                  data: {action:'verify', appealtype:'minecraft', uuid:uuid, value:value, appeal:appeal, email:email},
                  success: function(response){
                      if (!response){
                          alert("Something went wrong and we're not sure what! Please contact an admin if this issue persists!");
                      } else {
                          switch (response) {
                              case "1":
                                  document.getElementById("appeal").classList.add("hide");
                                  document.getElementById("punishment").classList.remove("hide");
                                  document.getElementById("wrongminecraftpunishment").innerHTML = "Bad punishment selected!";
                                  return false;
                              case "2":
                                  document.getElementById("appeal").classList.add("hide");
                                  document.getElementById("punishment").classList.remove("hide");
                                  document.getElementById("wrongminecraftpunishment").innerHTML = "Invalid punishment selected!";
                                  return false;
                              case "3":
                                  document.getElementById("appeal").classList.add("hide");
                                  document.getElementById("username").classList.remove("hide");
                                  document.getElementById("invalidusername").innerHTML = "Invalid username!";
                                  return false;
                              case "4":
                                  document.getElementById("appealError").innerHTML = "Something broke, we couldn't send the mail... If this issue persists please contact an admin!";
                                  return false;
                              case "5":
                                  document.getElementById("appealError").innerHTML = "Something broke, we couldn't send the discord message... If this issue persists please contact an admin!";
                                  return false;
                              case "6":
                                  document.getElementById("ratelimit").innerHTML = "You were ratelimited, please wait 30 seconds before resubmitting!";
                                  setTimeout(function(){ document.getElementById("ratelimit").innerHTML = "" }, 10000);
                                  return false;
                              case "7":
                                  document.getElementById("appeal").classList.add("hide");
                                  document.getElementById("email").classList.remove("hide");
                                  document.getElementById("emailinput").innerHTML = "This email is invalid, please use a real email or we won't be able to respond to you!";
                                  return false;
                              case "8":
                                  document.getElementById("appealError").innerHTML = "Please make sure your appeal is between 1 and 10000 characters!";
                                  return false;
                              default:
                                  document.getElementById("appeal").classList.add("hide");
                                  document.getElementById("done").classList.remove("hide");
                                  return false;
                          }
                      }
                  }
              });
              document.getElementById("finalsubmit").disable = false;
          }

          function verifyDiscord(){
              if (uuid == 'empty'){
                  document.getElementById("invalidusername").innerHTML = "Please submit a username first!"
                  document.getElementById("appeal").classList.add("hide");
                  document.getElementById("username").classList.remove("hide");
                  return false;
              }

              var reason = document.getElementById("discordpunishment").value;
              var appeal = document.getElementById("appealinput").value;
              var email = document.getElementById("emailinput").value;


              $.ajax({
                  url: 'https://alttd.com/api_appeals',
                  type: 'post',
                  data: {action:'verify', appealtype:'discord', reason:reason, username:uuid, appeal:appeal, email:email},
                  success: function(response){
                      if (!response){
                          alert("Something went wrong and we're not sure what! Please contact an admin if this issue persists!");
                      } else {
                          switch (response) {
                              case "4":
                                  document.getElementById("appealError").innerHTML = "Something broke, we couldn't send the mail... If this issue persists please contact an admin!";
                                  return false;
                              case "5":
                                  document.getElementById("appealError").innerHTML = "Something broke, we couldn't send the discord message... If this issue persists please contact an admin!";
                                  return false;
                              case "9":
                                  document.getElementById("appeal").classList.add("hide");
                                  document.getElementById("username").classList.remove("hide");
                                  document.getElementById("invalidusername").innerHTML = "Invalid Discord name!";
                                  return false;
                              case "10":
                                  document.getElementById("appeal").classList.add("hide");
                                  document.getElementById("punishment").classList.remove("hide");
                                  document.getElementById("wrongdiscordpunishment").innerHTML = "Please make sure the punishment reason is between 1 and 256 characters!";
                                  return false;
                              default:
                                  document.getElementById("appeal").classList.add("hide");
                                  document.getElementById("done").classList.remove("hide");
                                  return false;
                          }
                      }
                  }
              });
              document.getElementById("finalsubmit").disable = false;
          }
          </script>
          <script>
          function pasteIntoInput(el, text) {
              el.focus();
              if (typeof el.selectionStart == "number"
              && typeof el.selectionEnd == "number") {
                  var val = el.value;
                  var selStart = el.selectionStart;
                  el.value = val.slice(0, selStart) + text + val.slice(el.selectionEnd);
                  el.selectionEnd = el.selectionStart = selStart + text.length;
              } else if (typeof document.selection != "undefined") {
                  var textRange = document.selection.createRange();
                  textRange.text = text;
                  textRange.collapse(false);
                  textRange.select();
              }
          }
          </script>
          <script src="js/darkmodefix.js"></script>
    </body>

<!-- Mirrored from alttd.com/appeal by  [XR&CO'2014], Fri, 30 Sep 2022 00:14:16 GMT -->
</html>
